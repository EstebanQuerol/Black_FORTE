forte_add_module(BeagleBoneBlack "BeagleBone Black Function Blocks")
#############################################################################
# Beagle Bone Black
#############################################################################
if(FORTE_MODULE_BeagleBoneBlack)
	if("${FORTE_ARCHITECTURE}" STREQUAL "Posix" OR "${FORTE_ARCHITECTURE}" STREQUAL "Xenomai")
	forte_add_subdirectory(BlackLib)
	SET(FORTE_BeagleBoneBlack_IO_Libaries "" CACHE PATH "Path to IO lib: http://mkaczanowski.com/beaglebone-black-cpp-gpio-library-for-beginners/ (leave empty for installed source code)")
	forte_add_include_directories(${CMAKE_CURRENT_SOURCE_DIR})
	    if(EXISTS ${FORTE_BeagleBoneBlack_IO_Libaries})
		forte_add_sourcefile_hcpp(processinterface)
		forte_add_sourcefile_hcpp(../../stdfblib/io/IX)
		forte_add_sourcefile_hcpp(../../stdfblib/io/QX)
		forte_add_include_directories( ${FORTE_BeagleBoneBlack_IO_Libaries})
		forte_add_link_directories( ${FORTE_BeagleBoneBlack_IO_Libaries}/lib )
		forte_add_link_library(libbbbgpiomaster.a)
	    else(EXISTS ${FORTE_BeagleBoneBlack_IO_Libaries})
		#TODO forte_add_include_directories( /usr/include/bbblib )
	    endif(EXISTS ${FORTE_BeagleBoneBlack_IO_Libaries})
	
	else()
	    set(FORTE_MODULE_BeagleBoneBlack OFF) 
	    MESSAGE(SEND_ERROR "BeagleBone Black requires Posix or Xenomai architecture!")
	endif()	
endif()
